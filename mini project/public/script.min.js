var myApp=angular.module("myApp",["ngRoute","mainControllers"]);myApp.config(["$routeProvider",function(a){a.when("/",{templateUrl:"partials/home.html",controller:"mainCtrl"}).when("/MetricInfo",{templateUrl:"partials/metric-info.html",controller:"mainCtrl"}).when("/MyAlerts",{templateUrl:"partials/my-alerts.html",controller:"mainCtrl"}).otherwise({redirectTo:"/"})}]);var mainControllers=angular.module("mainControllers",["ui.bootstrap"]);mainControllers.controller("mainCtrl",["$scope","machineListService","metricInfoService","notificationDetailService","alertDetailsService",function(a,b,c,d,e){a.oneAtATime=!0,a.getAll=function(){b.getJson().then(function(b){a.machineList=b},function(a){})},a.getAll(),a.getData=function(){d.getJson().then(function(b){a.notificationDetail=b},function(a){})},a.getData(),a.setsendId=function(b,c,d){a.machineName=b,a.metricName=d,a.health=c},a.getsendId=function(){return"critical"==a.health?"glyphicon glyphicon-ban-circle red":"high"==a.health?"glyphicon glyphicon-warning-sign yellow ":"medium"==a.health?"glyphicon glyphicon-flag blue":"glyphicon glyphicon-ok-circle green"},a.showMetricDetails=function(){c.getmetricData().then(function(b){a.metricInfo=b},function(){})},a.showMetricDetails(),a.getAll=function(){e.getalertData().then(function(b){a.alertData=b},function(a){})},a.getAll(),$("#highchart").highcharts({chart:{renderTo:"#highchart"},credits:{enabled:!1},title:{text:"Time series of metric variation of machine",x:-20,margin:70},xAxis:{},yAxis:{title:{text:null},gridLineWidth:1,min:0,max:700,tickInterval:100,plotLines:[{value:0,width:1,color:"#808080"}],labels:{min:0,max:700,tickInterval:100}},tooltip:{valueSuffix:"Â°C"},legend:{layout:"horizontal",y:20,align:"center",verticalAlign:"top",borderWidth:0},series:[{name:"Actual",data:[7,6.9,9.5,14.5,18.2,21.5,25.2,26.5,23.3,18.3,13.9,9.6]},{name:"UCL",data:[-.2,.8,5.7,11.3,17,22,24.8,24.1,20.1,14.1,8.6,2.5]},{name:"LCL",data:[-.9,.6,3.5,8.4,13.5,17,18.6,17.9,14.3,9,3.9,1]}]})}]),mainControllers.filter("duplicates",function(){return function(a){var b=[],c=["low","medium","critical","high"];return angular.forEach(a,function(a){if(0==b.length)b.push(a);else{var d=!0;angular.forEach(b,function(e,f){if(e.name){if(e.name===a.name)return c.indexOf(a.health)>=c.indexOf(e.health)&&(b[f].health=a.health),void(d=!1)}else if(e.alert_id===a.alert_id)return c.indexOf(a.health)>=c.indexOf(e.health)&&(b[f].health=a.health),void(d=!1)}),d&&b.push(a)}}),b}}),mainControllers.directive("headerDir",function(){return{restrict:"AEC",templateUrl:"partials/header.html"}}),mainControllers.factory("alertDetailsService",["$http","$q",function(a,b){var c={};return c.getalertData=function(){var c=b.defer();return a.get("Json/alertDetails.json").success(function(a){c.resolve(a)}).error(function(a,b){c.reject(a)}),c.promise},c}]),mainControllers.factory("machineListService",["$http","$q",function(a,b){var c={};return c.getJson=function(){var d=b.defer();return a.get("Json/machineList.json").success(function(a){c.macList=a,d.resolve(a)}).error(function(a,b){d.reject(a)}),d.promise},c}]),mainControllers.factory("metricInfoService",["$http","$q",function(a,b){var c={};return c.getmetricData=function(){var c=b.defer();return a.get("Json/metricInfo.json").success(function(a){c.resolve(a)}).error(function(a,b){c.reject(a)}),c.promise},c}]),mainControllers.factory("notificationDetailService",["$http","$q",function(a,b){var c={};return c.getJson=function(){var c=b.defer();return a.get("Json/notification.json").success(function(a){c.resolve(a)}).error(function(a,b){c.reject(a)}),c.promise},c}]);